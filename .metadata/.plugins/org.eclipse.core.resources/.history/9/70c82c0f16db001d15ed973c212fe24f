package comm.octest.beans;

import java.sql.SQLException;
import java.util.HashMap;
import java.util.Map;

import comm.octest.db.DAO;

public class AuthorFactory {
	private  static  Map<String,Author> authors= new HashMap<>();
	 
	     public Author addAuthor(String author_name) throws SQLException {
	         //CREATE THE KEY
	         String key = "123"+ author_name;
	         fetchAuthors() ;
	         Author author= (Author) authors.get(key) ;
	         // IF IT DOESN'T EXIST, CREATE A NEW ONE IN THE MAP
	         if (author == null) {
	             author = new Author(author_name);
	             authors.put(key, author);
	             author.save(); 
	         }
	         return author;
	     }


	     public void fetchAuthors() throws SQLException { 
	     	    DAO dao = new DAO() ;
	            Author author = dao.fetchAuthors();
	           
	            int id_author =author.getId_author() ;
	            String author_name = author.getAuthor_name() ;
	            String key = id_author + author_name;
	            authors.put(key, author);
	  
	     }
	     
	   

	
	 }


